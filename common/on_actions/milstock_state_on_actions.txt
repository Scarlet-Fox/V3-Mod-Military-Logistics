########################################
##### On Monthly Pulse for a State #####
########################################

on_monthly_pulse_state = {
    on_actions = {
        milstock_increase_stockpiles
    }
}

# Increase Military Stockpiles
# ---------------------------------------------------------

# ROOT SCCOPE = State
# NOTE - ALL CHANGE VARIABLE ENTRIES NEED TO MATCH PRODUCTION METHOD VALUES FOR CONSISTENCY
milstock_increase_stockpiles = {
    effect = {
        if = {
            limit = {
                has_building = milstock_building_logistics_center
            }

            every_scope_building = {
                limit = {
                    is_building_type = milstock_building_logistics_center
                }

                save_scope_as = logistics_center
                ROOT = {
                    set_variable = {
                        name = milstock_staff_purchasing_ratio_var
                        value = milstock_sv_staff_purchasing_ratio
                    }
                }
            }

            # Update stockpile for Infantry :: Basic Equipment
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_infantry_pm_basic
                    }
                }
                change_variable = { 
                    name = milstock_state_small_arms_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Infantry :: Ammunition Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_infantry_pm_ammo
                    }
                }
                change_variable = { 
                    name = milstock_state_small_arms_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_ammunition_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Infantry :: Radios Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_infantry_pm_radios
                    }
                }
                change_variable = { 
                    name = milstock_state_small_arms_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_ammunition_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_radios_stockpile_var
                    add = {
                        add = 3
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Infantry :: Mechanization Focus
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_infantry_pm_mech
                    }
                }
                change_variable = { 
                    name = milstock_state_small_arms_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_ammunition_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_radios_stockpile_var
                    add = {
                        add = 3
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_tanks_stockpile_var
                    add = {
                        add = 3
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_oil_stockpile_var
                    add = {
                        add = 3
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }


            # Update stockpile for Artillery :: Basic Equipment
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_artillery_pm_basic
                    }
                }
                change_variable = { 
                    name = milstock_state_artillery_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Artillery :: Ammunition Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_artillery_pm_ammo
                    }
                }
                change_variable = { 
                    name = milstock_state_artillery_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_ammunition_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Artillery :: Radios Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_artillery_pm_radios
                    }
                }
                change_variable = { 
                    name = milstock_state_artillery_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_ammunition_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_radios_stockpile_var
                    add = {
                        add = 3
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Artillery :: Heavy Tank Focus
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_artillery_pm_tank
                    }
                }
                change_variable = { 
                    name = milstock_state_artillery_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_ammunition_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_radios_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_tanks_stockpile_var
                    add = {
                        add = 7
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_oil_stockpile_var
                    add = {
                        add = 7
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Calvary :: Basic Equipment
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_calvary_pm_basic
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Calvary :: Small Arms Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_calvary_pm_small_arms
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_small_arms_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Calvary :: Armor Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_calvary_pm_armored
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_small_arms_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_iron_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Calvary :: Light Tank Focus
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_calvary_pm_tank
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_small_arms_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_artillery_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_ammunition_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_radios_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_tanks_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_oil_stockpile_var
                    add = {
                        add = 5
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Mobilization Supplies :: Grain Only
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_mobil_pm_grain
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Mobilization Supplies :: Basic Supplies
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_mobil_pm_basic
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_fabric_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_liquor_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Mobilization Supplies :: Groceries Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_mobil_pm_groceries
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_fabric_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_liquor_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_groceries_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Mobilization Supplies :: Sugar Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_mobil_pm_sugar
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_fabric_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_liquor_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_groceries_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_sugar_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Mobilization Supplies :: Tobacco Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_mobil_pm_tobacco
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_fabric_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_liquor_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_groceries_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_sugar_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_tobacco_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }

            # Update stockpile for Mobilization Supplies :: Opium Included
            if = {
                limit = {
                    is_production_method_active = {
                        building_type = milstock_building_logistics_center
                        production_method = milstock_logicenter_mobil_pm_opium
                    }
                }
                change_variable = { 
                    name = milstock_state_grain_stockpile_var 
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_fabric_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_liquor_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_groceries_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_sugar_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_tobacco_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
                change_variable = { 
                    name = milstock_state_opium_stockpile_var
                    add = {
                        add = 10
                        multiply = var:milstock_staff_purchasing_ratio_var
                        multiply = scope:logistics_center.level
                        multiply = 4.33 # Weeks per month
                    }
                }
            }
        }
    }
}